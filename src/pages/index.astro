---
import Default from '../layouts/DefaultLayout.astro';
import Hero from '../components/Hero.tsx';

const experiences = [
  {
    href: 'https://www.latercera.com/',
    label: 'La Tercera',
    image: '/images/exp-la-tercera.png',
    alt: 'Experiencia con La Tercera',
  },
  {
    href: 'https://www.mineduc.cl/',
    label: 'Ministerio de Educación',
    image: '/images/exp-mineduc.png',
    alt: 'Experiencia con Ministerio de Educación',
  },
  {
    href: 'https://www.indap.gob.cl/',
    label: 'INDAP',
    image: '/images/exp-indap.png',
    alt: 'Experiencia con INDAP',
  },
  {
    href: 'https://www.cerronavia.cl/',
    label: 'Municipalidad de Cerro Navia',
    image: '/images/exp-cerro-navia.png',
    alt: 'Experiencia con Municipalidad de Cerro Navia',
  },
  {
    href: 'https://www.publimetro.cl/',
    label: 'Publimetro',
    image: '/images/exp-publimetro.png',
    alt: 'Experiencia con Publimetro',
  },
  {
    href: 'https://www.subtel.gob.cl/',
    label: 'Subsecretaría de Telecomunicaciones',
    image: '/images/exp-subtel.png',
    alt: 'Experiencia con Subsecretaría de Telecomunicaciones',
  },
  {
    href: 'https://www.tvn.cl/',
    label: 'Televisión Nacional de Chile',
    image: '/images/exp-tvn.png',
    alt: 'Experiencia con Televisión Nacional de Chile',
  },
];

const projects = [
  {
    id: 'operacion-topografo',
    title: 'Operación Topógrafo',
    category: 'Investigación',
    image: '/images/topografo.jpg',
    alt: 'Operación Topógrafo',
    summary: 'Investigación que reveló espionaje militar a periodistas y denunciantes.',
    details: [
      'Reportaje de investigación que reveló el espionaje de la Dirección de Inteligencia del Ejército a periodistas y funcionarios denunciantes.',
      'La publicación marcó un antes y un después en la discusión sobre transparencia y control civil de las Fuerzas Armadas, con repercusiones judiciales y mediáticas que se mantienen hasta hoy.',
    ],
  },
  {
    id: 'vocerias-y-despliegue',
    title: 'Vocerías y despliegue',
    category: 'Conducción estratégica',
    image: '/images/vocerias.jpg',
    alt: 'Vocerías y despliegue',
    summary: 'Fortalecimiento de vocerías y coherencia comunicacional en terreno.',
    details: [
      'Diseño de lineamientos, preparación de portavoces, acompañamiento en terreno y estandarización de mensajes clave para un despliegue coherente en medios, regiones y redes.',
    ],
  },
  {
    id: 'comunicacion-digital',
    title: 'Comunicación digital',
    category: 'Narrativa y medición',
    image: '/images/digital.jpg',
    alt: 'Comunicación digital',
    summary: 'Estrategia y formatos nativos para alto rendimiento.',
    details: [
      'Reorientación de equipos y parrillas a formatos nativos, workflows editoriales y medición de impacto para mejorar alcance, retención y reputación en plataformas sociales.',
    ],
  },
];

const reflexiones = [
  {
    id: 'la-ley-de-la-variedad-requerida',
    title: 'La ley de la variedad requerida y el desafío comunicacional contemporáneo',
    tag: 'Sistema',
    summary:
      'Ningún actor puede controlar el entorno sin igualarlo en complejidad; y si no puede, debe domesticarlo.',
    details: [
      'La ley de la variedad requerida, postulada por Ross Ashby en 1958, es una de las piedras angulares de la cibernética y una lección vigente para afrontar el entorno comunicativo actual. Según el psiquiatra inglés, un sistema solo puede sobrevivir y mantenerse estable si su capacidad de respuestas al menos iguala la complejidad de las perturbaciones que provienen del entorno.',
      'En términos comunicacionales, ningún actor puede controlar el entorno sin igualarlo en complejidad; y si no puede igualarlo, debe aprender a domesticarlo. Esto último es cada vez más difícil entendiendo la dificultad que existe por controlar la agenda pública.',
      'Hoy la variedad inunda el entorno a través de innumerables canales, audiencias y especializaciones. Aplicando la enseñanza de Ashby, la ausencia o la pasividad no resuelve conflictos: exige que las estrategias planifiquen y conduzcan a través de múltiples canales y mensajes que contrarresten esa variedad.',
    ],
  },
  {
    id: 'autoridades-y-redes-sociales',
    title: 'Autoridades y redes sociales: una confusión frecuente',
    tag: 'Gestión pública',
    summary: 'Las redes institucionales no son un canal 24/7 para cronicar agendas personales.',
    details: [
      'Pese a lo que muchas autoridades creen, las redes sociales institucional no son su canal de noticias 24/7 a su disposición. Registrar y publicar cada una de sus actividades públicas no solo distrae a los equipos de comunicaciones de lo realmente importante —gestión de prensa, comunicación interna o creación de contenido de valor—, sino que termina generando más bloqueos que los soñados “likes”.',
      'Autoridades de distintos niveles replican este modelo: subsecretarías, seremis, delegaciones, servicios. Parecen clones de lo que no se debe hacer en redes sociales. Si ya existen fuertes resistencias hacia las instituciones estatales, malgastar la oportunidad que ofrece el entorno digital solo amplía esa distancia.',
      'Liberen a sus equipos. Permítanles crear. Si una reunión no se publica, nadie la extrañará. Si logran comunicar los logros de gestión con simpatía y cercanía, construirán comunidad y obtendrán la visibilidad que buscan. No todo gira sobre ustedes.',
    ],
  },
  {
    id: 'comunicar-sin-miedo',
    title: 'Comunicar sin miedo',
    tag: 'Vocería',
    summary: 'Preparación, confianza y escucha activa superan el temor a exponerse.',
    details: [
      'Durante una visita a Rapa Nui tuve la oportunidad de entrevistar a la alcaldesa Elizabeth Arévalo Pakarati. Terminada la conversación, mi reacción fue inmediata: ya quisiera cualquier político o directivo de empresa su capacidad de comunicar. Todo funcionó perfecto. Su vestimenta, postura, tono y locuacidad demostraban un trabajo constante y dedicado.',
      'Su ejemplo sirve para contrastar con el temor y la desconfianza con que muchas autoridades enfrentan la responsabilidad de comunicar. Cada vez son más quienes anteponen la precaución por sobre la oportunidad. El miedo al cuestionamiento, la contrapregunta, el tuit o la columna del día siguiente inmoviliza e impide aprovechar la posibilidad de conectar con públicos diversos.',
      'La comunicación es el principal vehículo entre la comunidad y sus autoridades. Ignorarla, evadirla o subestimarla genera costos. Mejor seguir el ejemplo de la alcaldesa de Rapa Nui y asumirla con la seriedad y la confianza que merece.',
    ],
  },
];

const press = [
  {
    title: 'Operación Topógrafo — Espionaje del Ejército a denunciantes',
    outlet: 'La Tercera',
    link: 'https://www.latercera.com/reportajes/noticia/operacion-topografo-espionaje-del-ejercito-cuatro-denunciantes-irregularidades/777342/',
    image: '/images/topografo.jpg',
    alt: 'Operación Topógrafo — Espionaje del Ejército a denunciantes',
    summary: 'Investigación que reveló el espionaje del Ejército a periodistas y denunciantes.',
  },
  {
    title: 'Ricardo Lagos: “Durante mi gobierno no privaticé nada, al contrario”',
    outlet: 'Publimetro',
    link: 'https://www.publimetro.cl/cl/noticias/2016/11/18/ex-presidente-lagos-durante-mi-gobierno-no-privatice-nada-contrario.html',
    image: '/images/lagos.jpg',
    alt: 'Ricardo Lagos: “Durante mi gobierno no privaticé nada, al contrario”',
    summary: 'Entrevista al ex Presidente Ricardo Lagos sobre su legado económico y político.',
  },
  {
    title: 'Sebastián Piñera: “Me siento orgulloso de lo que he logrado en la vida”',
    outlet: 'Publimetro',
    link: 'https://www.publimetro.cl/cl/noticias/2017/06/19/sebastian-pinera-me-siento-orgulloso-lo-he-logrado-vida.html',
    image: '/images/pinera.jpg',
    alt: 'Sebastián Piñera: “Me siento orgulloso de lo que he logrado en la vida”',
    summary: 'Entrevista centrada en la trayectoria empresarial y política de Sebastián Piñera.',
  },
];
---
<Default title="Inicio">
  <Hero client:load />

  <section id="experiencia" class="max-w-6xl mx-auto px-6 py-16">
    <h2 class="text-2xl font-heading border-b-2 border-accent inline-block mb-10">Experiencia</h2>
    <div class="grid grid-cols-2 gap-6 text-text-dim sm:grid-cols-3 lg:grid-cols-4">
      {experiences.map(({ href, label, image, alt }) => (
        <a
          class="group flex h-full w-full flex-col items-center justify-center gap-4 rounded-2xl border border-black/5 bg-bg-card p-6 text-center shadow-[0_12px_30px_rgba(20,20,20,0.08)] transition hover:-translate-y-1 hover:border-accent/60 hover:shadow-[0_18px_36px_rgba(20,20,20,0.12)]"
          href={href}
          rel="noopener"
          target="_blank"
        >
          <img src={image} alt={alt} class="w-28 shrink-0 rounded-2xl border border-black/5 transition group-hover:border-accent/50" loading="lazy" />
          <span class="text-sm font-semibold tracking-wide text-text-light group-hover:text-accent-alt">{label}</span>
        </a>
      ))}
    </div>
  </section>

  <section id="sistema" class="max-w-4xl mx-auto px-6 py-16">
    <h2 class="text-3xl font-heading mb-6">Sistema</h2>
    <blockquote class="rounded-2xl border border-black/5 bg-bg-card p-10 text-lg text-text-dim shadow-[0_16px_36px_rgba(20,20,20,0.08)]">
      <p class="leading-relaxed text-text-light">
        Ningún actor puede controlar el entorno sin igualarlo en complejidad; y si no puede igualarlo, debe aprender a domesticarlo.
      </p>
      <span class="mt-4 block text-sm font-semibold text-text-dim">— Ross Ashby</span>
    </blockquote>
  </section>

  <section id="proyectos" class="max-w-6xl mx-auto px-6 py-16">
    <h2 class="text-3xl font-heading mb-6">Proyectos</h2>
    <p class="text-text-dim max-w-3xl mb-10">Una selección de casos con impacto, contados en tarjetas con profundidad.</p>
    <div class="grid gap-10 md:grid-cols-3">
      {projects.map(({ id, title, category, image, alt, summary, details }) => (
        <div class="contents">
          <article class="group relative flex h-full flex-col gap-6 rounded-[2.5rem] bg-[#E8E1CF] p-8 shadow-[0_30px_60px_rgba(0,0,0,0.12)] transition hover:-translate-y-2 hover:shadow-[0_36px_72px_rgba(0,0,0,0.18)]">
            <div class="relative overflow-hidden rounded-3xl">
              <img src={image} alt={alt} class="aspect-[4/3] w-full object-cover transition duration-500 group-hover:scale-[1.04]" loading="lazy" />
            </div>
            <div class="space-y-4">
              <p class="text-xs uppercase tracking-[0.3em] text-text-dim">{category}</p>
              <h3 class="text-2xl font-semibold leading-tight text-text-light">
                <span class="title-highlight">{title}</span>
              </h3>
              <p class="text-sm text-text-dim hover-highlight-base">{summary}</p>
              <div class="flex justify-end">
                <button
                  type="button"
                  class="rounded-full border border-black/50 px-5 py-2 text-sm font-semibold text-text-light transition hover:bg-accent-alt hover:text-text-light hover-highlight-base"
                  data-modal={`modal-proyecto-${id}`}
                >
                  Ver caso
                </button>
              </div>
            </div>
          </article>
          <dialog id={`modal-proyecto-${id}`} class="app-modal">
            <form method="dialog" class="flex justify-end">
              <button class="rounded-full border border-black/40 px-4 py-1 text-sm uppercase tracking-wide text-text-dim transition hover:border-black hover:text-text-light">
                Cerrar
              </button>
            </form>
            <div class="space-y-4">
              <p class="text-xs uppercase tracking-[0.3em] text-text-dim">{category}</p>
              <h3 class="text-2xl font-semibold text-text-light">{title}</h3>
              {details.map((paragraph) => (
                <p class="text-sm leading-relaxed text-text-dim">{paragraph}</p>
              ))}
            </div>
          </dialog>
        </div>
      ))}
    </div>
  </section>

  <section id="reflexiones" class="max-w-5xl mx-auto px-6 py-16">
    <h2 class="text-3xl font-heading mb-6">Reflexiones</h2>
    <p class="text-text-dim mb-10">Ensayos breves sobre estrategia, vocerías y comunicación pública.</p>
    <div class="space-y-10">
      {reflexiones.map(({ id, title, tag, summary, details }) => (
        <div class="contents">
          <article class="relative flex flex-col gap-5 rounded-[2rem] border border-black/10 bg-gradient-to-br from-[#10212B] via-[#142935] to-[#0B1A22] p-8 shadow-[0_35px_70px_rgba(0,0,0,0.45)] transition hover:-translate-y-2 hover:shadow-[0_40px_80px_rgba(0,0,0,0.55)]">
            <div class="flex items-center gap-3 text-xs uppercase tracking-[0.4em] text-accent-alt">
              <span class="h-px flex-1 bg-accent-alt/60" aria-hidden="true" />
              {tag}
              <span class="h-px flex-1 bg-accent-alt/60" aria-hidden="true" />
            </div>
            <h3 class="text-3xl font-semibold leading-tight text-white">{title}</h3>
            <p class="text-sm text-text-dim hover-highlight-base">{summary}</p>
            <div class="flex justify-end">
              <button
                type="button"
                class="rounded-full border border-accent-alt/60 px-5 py-2 text-sm font-semibold text-accent-alt transition hover:bg-accent-alt hover:text-text-light"
                data-modal={`modal-reflexion-${id}`}
              >
                Leer completa
              </button>
            </div>
          </article>
          <dialog id={`modal-reflexion-${id}`} class="app-modal">
            <form method="dialog" class="flex justify-end">
              <button class="rounded-full border border-black/40 px-4 py-1 text-sm uppercase tracking-wide text-text-dim transition hover:border-black hover:text-text-light">
                Cerrar
              </button>
            </form>
            <div class="space-y-4">
              <div class="flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-text-dim">
                <span class="h-px flex-1 bg-black/20" aria-hidden="true" />
                {tag}
                <span class="h-px flex-1 bg-black/20" aria-hidden="true" />
              </div>
              <h3 class="text-2xl font-semibold text-text-light">{title}</h3>
              {details.map((paragraph) => (
                <p class="text-sm leading-relaxed text-text-dim">{paragraph}</p>
              ))}
            </div>
          </dialog>
        </div>
      ))}
    </div>
  </section>

  <section id="prensa" class="max-w-6xl mx-auto px-6 py-16">
    <h2 class="text-3xl font-heading mb-6">Prensa</h2>
    <div class="grid gap-8 lg:grid-cols-3">
      {press.map(({ title, outlet, link, image, alt, summary }) => (
        <article class="flex h-full flex-col overflow-hidden rounded-[2rem] border border-black/10 bg-bg-card shadow-[0_28px_56px_rgba(0,0,0,0.18)] transition hover:-translate-y-2 hover:shadow-[0_34px_64px_rgba(0,0,0,0.24)]">
          <div class="relative">
            <img src={image} alt={alt} class="h-48 w-full object-cover" loading="lazy" />
            <span class="absolute bottom-4 right-4 rounded-full bg-black/80 px-4 py-1 text-xs uppercase tracking-[0.4em] text-accent-alt">{outlet}</span>
          </div>
          <div class="flex flex-1 flex-col gap-4 p-8">
            <h3 class="text-xl font-semibold text-text-light">{title}</h3>
            <p class="text-sm text-text-dim hover-highlight-base">{summary}</p>
            <div class="mt-auto flex justify-end">
              <a
                href={link}
                target="_blank"
                rel="noopener"
                class="rounded-full border border-black/40 px-5 py-2 text-sm font-semibold text-text-light transition hover:border-accent-alt hover:text-accent-alt hover-highlight-base"
              >
                Nota completa
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </section>

  <section id="contacto" class="max-w-3xl mx-auto px-6 py-16">
    <div class="rounded-2xl border border-black/5 bg-bg-card px-8 py-12 text-center shadow-[0_20px_40px_rgba(20,20,20,0.08)]">
      <h2 class="text-3xl font-heading mb-4">¿Conversamos?</h2>
      <p class="text-text-dim">Escríbeme y revisa mi CV.</p>
      <div class="mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row">
        <a href="mailto:seba.vedoya@gmail.com" class="inline-flex items-center rounded-full bg-accent px-6 py-3 font-semibold text-white transition hover:bg-accent-alt hover:text-text-light">
          seba.vedoya@gmail.com
        </a>
        <a href="/files/CV.pdf" class="inline-flex items-center rounded-full border border-black/10 px-6 py-3 font-semibold text-text-light transition hover:border-accent hover:text-accent-alt">
          Descargar CV
        </a>
        <a
          href="https://www.linkedin.com/in/sebastianvedoyam/"
          target="_blank"
          rel="noopener"
          class="inline-flex items-center rounded-full bg-accent-alt px-6 py-3 font-semibold text-text-light transition hover:bg-accent-alt/80"
        >
          LinkedIn
        </a>
      </div>
    </div>
  </section>

  <script is:inline>
    const modalTriggers = document.querySelectorAll('[data-modal]');
    const modals = document.querySelectorAll('.app-modal');

    modalTriggers.forEach((trigger) => {
      trigger.addEventListener('click', () => {
        const id = trigger.getAttribute('data-modal');
        const dialog = id ? document.getElementById(id) : null;
        if (dialog instanceof HTMLDialogElement && typeof dialog.showModal === 'function') {
          dialog.showModal();
        }
      });
    });

    modals.forEach((dialog) => {
      dialog.addEventListener('click', (event) => {
        const rect = dialog.getBoundingClientRect();
        const outside =
          event.clientX < rect.left ||
          event.clientX > rect.right ||
          event.clientY < rect.top ||
          event.clientY > rect.bottom;

        if (outside) {
          dialog.close();
        }
      });

      dialog.addEventListener('cancel', (event) => {
        event.preventDefault();
        dialog.close();
      });
    });
  </script>
</Default>
